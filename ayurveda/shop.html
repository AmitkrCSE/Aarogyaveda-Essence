<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aarogyaveda Essence — Shop Now</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
/* --------------------- GLOBAL --------------------- */
:root {
  --green-1: #165a1d;
  --green-2: #2e7d32;
  --accent: #ffd700;
  --muted: #6b6b6b;
  --card: #ffffff;
  --glass: rgba(255,255,255,0.6);
}



* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  font-family: 'Poppins', sans-serif;
  margin: 0;
  background: linear-gradient(180deg, #f6fff6, #fcfff9 40%);
  color: #143a21;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* --------------------- HEADER / NAV --------------------- */
.header {
  position: sticky; top: 0; z-index: 1200;
  display: flex; align-items: center; justify-content: space-between;
  padding: 18px 28px;
  background: linear-gradient(180deg, #05f92a, #1207e2);
  color: #fff;
  box-shadow: 0 6px 18px rgba(11,65,23,0.18);
  flex-wrap: wrap;
}

.brand {
  display: flex; align-items: center; gap: 14px;
}
.brand img { width: 70px; height: 70px; border-radius: 10px; object-fit: cover; box-shadow: 0 6px 18px rgba(0,0,0,0.25); }
.brand h1 { font-size: 20px; margin: 0; letter-spacing: 0.6px; }

.controls { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
.icon-btn {
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
  color: #fff; padding: 8px 12px; border-radius: 12px; cursor: pointer;
  display: inline-flex; align-items: center; gap: 8px; font-weight: 600;
  transition: transform .18s ease, box-shadow .18s;
}
.icon-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 18px rgba(0,0,0,0.25); }
.cart-count { background: var(--accent); color: var(--green-1); padding: 4px 8px; border-radius: 999px; font-weight: 700; }

/* --------------------- HERO --------------------- */
.hero {
  display: flex; gap: 20px; align-items: center;
  padding: 36px 6%;
  background: url('/0.73877400_1523541569_attachref.avif') center/cover no-repeat;
  border-radius: 0 0 30px 30px;
  position: relative; color: white; min-height: 220px;
}
.hero::after {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.2));
  border-radius: 0 0 30px 30px;
}
.hero-inner { position: relative; z-index: 2; display: flex; gap: 20px; align-items: center; width: 100%; flex-wrap: wrap; }
.hero-left { flex: 1; max-width: 720px; }
.hero h2 { font-size: 28px; margin: 0 0 10px; color: #fff; letter-spacing: 0.4px; }
.hero p { margin: 0 0 14px; color: rgba(255,255,255,0.95); }

/* search / filters bar */
.toolbar {
  display: flex; gap: 12px; align-items: center; background: rgba(255,255,255,0.95);
  padding: 12px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  width: 100%; flex-wrap: wrap;
}
.search { display: flex; gap: 8px; flex: 1; align-items: center; }
.search input {
  width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid #e6f4ea; outline: none;
  font-size: 15px;
}
.select, .sort {
  padding: 10px 12px; border-radius: 10px; border: 1px solid #e6f4ea; background: white;
}

/* --------------------- MAIN LAYOUT --------------------- */
.container { max-width: 1200px; margin: 24px auto; padding: 0 20px; }
.grid { display: grid; grid-template-columns: 1fr 340px; gap: 28px; }

/* --------------------- PRODUCTS --------------------- */
.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 18px; margin-top: 18px;
}

.product {
  background: linear-gradient(145deg,#ffffff,#f5fff7);
  border-radius: 16px; padding: 14px;
  box-shadow: 0 10px 30px rgba(11,65,23,0.06);
  transition: transform .35s ease, box-shadow .35s ease;
  display: flex; flex-direction: column; gap: 8px; position: relative; overflow: hidden;
}
.product:hover { transform: translateY(-8px); box-shadow: 0 18px 45px rgba(11,65,23,0.12); }
.product .media { width: 100%; height: 170px; border-radius: 12px; overflow: hidden; position: relative; }
.product img { width: 100%; height: 100%; object-fit: cover; transition: transform .6s ease; }
.product:hover img { transform: scale(1.08) rotate(-1deg); filter: brightness(.98); }
.badge { position: absolute; left: 10px; top: 10px; background: var(--accent); color: var(--green-1); padding: 6px 10px; border-radius: 14px; font-weight: 700; }
.product h3 { font-size: 16px; margin: 6px 0; color: var(--green-1); }
.meta { display: flex; justify-content: space-between; align-items: center; gap: 8px; margin-top: auto; }
.price { font-weight: 700; color: #14411b; font-size: 16px; }

/* --------------------- BUTTONS --------------------- */
.btn {
  padding: 9px 14px; border-radius: 999px; border: none; cursor: pointer; font-weight: 700;
  background: linear-gradient(90deg,var(--green-2),var(--green-1)); color: #fff; box-shadow: 0 8px 18px rgba(0,0,0,0.12);
  transition: transform .18s, box-shadow .18s;
}
.btn.ghost { background: transparent; color: var(--green-1); border: 1px solid rgba(20,74,29,0.08); }
.btn:hover { transform: translateY(-3px); }

/* --------------------- SIDEBAR --------------------- */
.sidebar {
  background: linear-gradient(180deg,#ffffff,#f6fff7);
  border-radius: 16px; padding: 18px; box-shadow: 0 10px 30px rgba(0,0,0,0.06);
  height: fit-content;
}
.sidebar h4 { margin: 0 0 10px; color: var(--green-1); }
.filter-group { margin-bottom: 18px; }
.chips { display: flex; flex-wrap: wrap; gap: 8px; }
.chip {
  padding: 8px 12px; border-radius: 999px; background: #f0fff2; color: var(--green-1); cursor: pointer; border: 1px solid rgba(33,150,83,0.06);
  transition: transform .18s ease;
}
.chip:hover { transform: translateY(-3px); }

/* --------------------- FOOTER --------------------- */
.footer {
  background: linear-gradient(135deg, #08a9fa, #cef606);
  color: white; text-align: center;
  padding: 60px 20px 20px; position: relative;
}
.footer h2 { font-size: 28px; margin-bottom: 15px; }
.footer p { margin-bottom: 20px; font-size: 16px; }
.footer-links a {
  margin: 0 10px; color: white; text-decoration: none; font-weight: 600; transition: 0.3s;
}
.footer-links a:hover { color: #1e8449; text-shadow: 0 0 5px #fff; }
.copy { margin-top: 20px; font-size: 14px; color: #fff; }

/* --------------------- REVEAL --------------------- */
.reveal { opacity: 0; transform: translateY(18px); transition: all .7s cubic-bezier(.2,.9,.3,1); }
.reveal.is-visible { opacity: 1; transform: none; }

/* ===================================================================== */
/*                          RESPONSIVE BREAKPOINTS                       */
/* ===================================================================== */

/* 1200px - Large Laptop */
@media (max-width: 1200px) {
  .grid { grid-template-columns: 2fr 300px; }
  .hero h2 { font-size: 24px; }
}

/* 992px - Tablets Landscape */
@media (max-width: 992px) {
  .grid { grid-template-columns: 1fr; }
  .sidebar { order: 2; margin-top: 20px; }
  .hero { flex-direction: column; text-align: center; padding: 30px 20px; }
  .hero h2 { font-size: 22px; }
  .hero p { font-size: 15px; }
  .toolbar { flex-direction: column; }
}

/* 768px - Tablets Portrait */
@media (max-width: 768px) {
  .brand img { width: 60px; height: 60px; }
  .brand h1 { font-size: 18px; }
  .controls { justify-content: center; }
  .product img { height: 160px; }
  .footer h2 { font-size: 22px; }
}

/* 576px - Mobiles */
@media (max-width: 576px) {
  .header { flex-direction: column; gap: 10px; padding: 14px; text-align: center; }
  .toolbar { padding: 10px; }
  .product { padding: 10px; }
  .product h3 { font-size: 15px; }
  .footer p { font-size: 14px; }
  .copy { font-size: 12px; }
}

/* 400px - Small Mobiles */
@media (max-width: 400px) {
  .hero h2 { font-size: 18px; }
  .icon-btn { font-size: 13px; padding: 6px 10px; }
  .search input { font-size: 13px; }
}

/* 1920px+ - Ultra-Wide */
@media (min-width: 1920px) {
  body { font-size: 18px; }
  .container { max-width: 1600px; }
  .product img { height: 200px; }
}

</style>
</head>
<body>





















<!-- HEADER -->
<div class="header">
  <div class="brand">
    <img src="/logo-removebg-preview.png" alt="logo">
    <div>
      <h1>Aarogyaveda Essence</h1>
      <div style="font-size:12px;opacity:.9">Shop — Authentic Ayurvedic Remedies</div>
    </div>
  </div>

  <div class="controls">
    <button class="icon-btn" id="toggle-reco">✨ Recommendations</button>
    <button class="icon-btn" id="open-cart">🛒 Cart <span class="cart-count" id="cart-count">0</span></button>
  </div>
</div>









































<!-- HERO / SEARCH -->
<section class="hero">
  <div class="hero-inner">
    <div class="hero-left">
      <h2>Shop Natural Ayurvedic Remedies — curated, pure, and effective</h2>
      <p>Find herbs, powders, oils and wellness kits sourced ethically. Use the search and filters to narrow down — quick view any product and add to cart with one click.</p>
      <div class="toolbar" style="margin-top:12px">
        <div class="search">
          <input id="searchInput" type="search" placeholder="Search products, herbs or benefits — e.g. 'Ashwagandha'">
          <select id="categorySelect" class="select" title="Category">
            <option value="all">All categories</option>
            <option value="supplements">Supplements</option>
            <option value="topicals">Topicals</option>
            <option value="teas">Teas</option>
            <option value="personal-care">Personal Care</option>
          </select>
          <select id="sortSelect" class="sort" title="Sort">
            <option value="featured">Featured</option>
            <option value="price-asc">Price: Low → High</option>
            <option value="price-desc">Price: High → Low</option>
            <option value="name-asc">Name A → Z</option>
          </select>
        </div>
      </div>
    </div>

    <div style="min-width:260px; text-align:right;">
      <img src="/Ayurveda_Header_750x375.jpg" alt="herbs" style="width:260px;border-radius:12px;box-shadow:0 12px 30px rgba(0,0,0,0.2)">
      <div style="margin-top:10px;font-size:13px; color:rgba(255,255,255,0.9)">Pure • Ethical • Tested</div>
    </div>
  </div>
</section>

<!-- MAIN -->
<main class="container">
  <div class="grid">
    <!-- PRODUCTS -->
    <div class="products">
      <div class="products-grid" id="productsGrid" aria-live="polite"></div>
    </div>

    <!-- SIDEBAR -->
    <aside class="sidebar reveal" id="sidebarPanel">
      <h4>Filters</h4>
      <div class="filter-group">
        <div style="font-weight:700;margin-bottom:8px">Price range</div>
        <div class="chips">
          <div class="chip" data-min="0" data-max="250">Under ₹250</div>
          <div class="chip" data-min="250" data-max="400">₹250–₹400</div>
          <div class="chip" data-min="401" data-max="9999">Above ₹400</div>
        </div>
      </div>

      <div class="filter-group">
        <div style="font-weight:700;margin-bottom:8px">Tags</div>
        <div class="chips" id="tagChips">
          <div class="chip" data-tag="immunity">Immunity</div>
          <div class="chip" data-tag="skincare">Skincare</div>
          <div class="chip" data-tag="haircare">Haircare</div>
          <div class="chip" data-tag="digestion">Digestion</div>
          <div class="chip" data-tag="sleep">Sleep</div>
        </div>
      </div>

      <div class="filter-group">
        <h4>Recommendations</h4>
        <div class="reco" id="recommendations">
          <!-- dynamic -->
        </div>
      </div>
    </aside>
  </div>
</main>

<!-- LONG SELLER STORY / SHOP CONTENT -->
<section class="long-content reveal">
  <h2>Why choose Aarogyaveda — our promise of purity, science & sustainability</h2>

  <p>
    Aarogyaveda Essence curates herbal remedies by bringing together time-honored Ayurvedic knowledge and modern quality standards.
    Our selection is driven by three pillars — authenticity, transparency, and efficacy. Every herb we source is traceable: you can view
    origin details, farm practices, and test certificates in the product detail view. We work with smallholder farmers and cooperatives,
    prioritizing regenerative agriculture and fair pay.
  </p>

  <p>
    In your daily life, the smallest shifts create deep ripples. Simple rituals like warm ginger water in the morning, a few drops of brahmi
    oil massaged into the scalp weekly, or consistent use of cooling tulsi tea can change your energy and clarity over months. Our shop is
    designed not as a marketplace alone, but as a learning environment: recommended pairings, short guides, and micro-quizzes help you pick
    what fits your dosha and goals. For example, if you search 'sleep', you'll find curated calming blends, gentle oils, and step-by-step
    bedtime routines all together.
  </p>

  <p>
    We also use gentle formulations. Where possible, we prefer whole-herb powders, cold-pressed oils, and solvent-free extracts. That means
    a slightly different texture or smell than mass-market products — but also a more complete expression of plant benefits. Each product
    card includes a transparency panel you can open to view sourcing and lab verification info.
  </p>

  <p>
    Sustainability is stitched into operations. Packaging is recyclable or compostable, shipping is partnered with carbon-aware carriers, and
    waste is minimized in processing. Our "Subscription Wellness Box" allows users to try new seasonal herbs while supporting small farms.
  </p>

  <p>
    This shop is also social: a community forum connects buyers, practitioners, and product makers. You can post questions, share results, or
    follow wellness challenges. We believe learning by doing, sharing, and repeating is the fastest route to lifelong health.
  </p>

  <p>
    Finally, our recommendation engine (visible in the sidebar) learns from your cart and suggests complementary items — because Ayurveda
    works best when herbs and routines are combined thoughtfully. Enjoy the journey — the shop is crafted to be educational, practical, and
    deeply human.
  </p>
</section>

<!-- CART MODAL -->
<div class="cart-modal" id="cartModal" aria-hidden="true">
  <div class="cart-panel" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
    <h3 id="cartTitle">Your Cart</h3>
    <div class="cart-list" id="cartList" aria-live="polite"></div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
      <div class="total-box">Total: ₹<span id="totalAmount">0</span></div>
      <div>
        <button class="checkout-btn" id="checkoutBtn">Checkout</button>
        <button class="close-btn" id="closeCartBtn">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- Footer -->
<footer class="footer">
  <h2>Join the Aarogyaveda Essence Family 🌿</h2>
  <p>Bringing ancient Ayurveda closer to your modern lifestyle</p>
  <div class="footer-links">
    <a href="index.html">🏠 Home</a>
    <a href="blog.html">📰 Blog</a>
    <a href="shop.html">🛍 Shop</a>
    <a href="contact.html">📞 Contact</a>
  </div>
  <p class="copy">© 2025 Aarogyaveda Essence | Founded by Amit Kumar</p>
</footer>
<script>
/* --------------------- DATA & STATE --------------------- */
const PRODUCTS = [
  {id:1,name:"Ashwagandha Capsules",price:399,cat:"supplements",tags:["stress","energy"],img:"https://i.ibb.co/7VtdvW7/ashwagandha.jpg",badge:"Bestseller",desc:"Supports stress resilience and vitality."},
  {id:2,name:"Tulsi Green Tea (50g)",price:249,cat:"teas",tags:["immunity","respiratory"],img:"https://i.ibb.co/XVwv8MM/tulsi.jpg",badge:"Organic",desc:"Calming, immunity-boosting tulsi tea."},
  {id:3,name:"Brahmi Hair Oil (100ml)",price:499,cat:"topicals",tags:["haircare"],img:"https://i.ibb.co/x5ZLgfP/brahmi.jpg",badge:"Popular",desc:"Nourishes scalp, supports hair growth."},
  {id:4,name:"Neem Face Pack (80g)",price:299,cat:"personal-care",tags:["skincare","detox"],img:"https://i.ibb.co/T8WL1sN/neem.jpg",badge:"Detox",desc:"Natural neem cleansing pack for clarity."},
  {id:5,name:"Aloe Vera Gel (200ml)",price:350,cat:"personal-care",tags:["skincare","cooling"],img:"https://i.ibb.co/kGXrt1D/aloe.jpg",badge:"Soothing",desc:"Cooling gel for skin hydration & repair."},
  {id:6,name:"Triphala Powder (200g)",price:280,cat:"supplements",tags:["digestion"],img:"https://i.ibb.co/dBTn7mT/triphala.jpg",badge:"Traditional",desc:"Gentle digestive and cleansing formula."},
  {id:7,name:"Moringa Capsules (60 nos)",price:450,cat:"supplements",tags:["nutrition"],img:"https://i.ibb.co/Mh7ZB7L/moringa.jpg",badge:"Nutrient-rich",desc:"Daily nutrition support."},
  {id:8,name:"Herbal Incense (Sandal)",price:180,cat:"personal-care",tags:["calming"],img:"https://i.ibb.co/f0cWrxC/incense.jpg",badge:"Aromatic",desc:"Handrolled natural incense."},
  {id:9,name:"Herbal Shampoo (200ml)",price:520,cat:"personal-care",tags:["haircare"],img:"https://i.ibb.co/42HD19z/shampoo.jpg",badge:"Sulfate-Free",desc:"Herbal cleansing for healthy hair."},
  {id:10,name:"Sandalwood Soap",price:220,cat:"personal-care",tags:["skincare"],img:"https://i.ibb.co/7y3Vxch/soap.jpg",badge:"Handmade",desc:"Gentle sandalwood soap for daily use."},
  // extra items to populate catalog
  {id:11,name:"Giloy Capsules",price:420,cat:"supplements",tags:["immunity"],img:"https://i.ibb.co/0j6F7ZP/giloy.jpg",badge:"Immunity",desc:"Supports natural immunity and recovery."},
  {id:12,name:"Turmeric Churna (100g)",price:220,cat:"supplements",tags:["anti-inflammatory"],img:"https://i.ibb.co/f0srQxM/turmeric.jpg",badge:"Anti-inflammatory",desc:"Pure turmeric powder for cooking & tonics."},
  {id:13,name:"Chamomile Sleep Tea",price:199,cat:"teas",tags:["sleep","calming"],img:"https://i.ibb.co/4Nj3F1k/chamomile.jpg",badge:"Calming",desc:"Gentle blend to support restful sleep."},
  {id:14,name:"Bhringraj Hair Serum",price:699,cat:"topicals",tags:["haircare"],img:"https://i.ibb.co/2s2z1c1/bhringraj.jpg",badge:"Premium",desc:"Nourishing serum for hair strength."},
  {id:15,name:"Detox Herbal Kit",price:899,cat:"supplements",tags:["detox"],img:"https://i.ibb.co/xq6tSyQ/detox.jpg",badge:"Kit",desc:"3-week herbal detox kit with guides."}
];

let state = {
  displayed: [...PRODUCTS],
  cart: JSON.parse(localStorage.getItem('av_cart')||'[]'),
  filters: {category:'all',min:null,max:null,tag:null,query:'',sort:'featured'}
};

/* --------------------- UTIL / RENDER --------------------- */
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));

function money(n){ return n.toLocaleString('en-IN'); }

/* render products */
function renderProducts(){
  const grid = $('#productsGrid');
  const {category, min, max, tag, query, sort} = state.filters;
  let list = PRODUCTS.slice();

  // filter category
  if(category && category!=='all') list = list.filter(p=>p.cat===category);
  // filter price
  if(min!=null) list = list.filter(p=>p.price >= min);
  if(max!=null) list = list.filter(p=>p.price <= max);
  // filter tag
  if(tag) list = list.filter(p=>p.tags.includes(tag));
  // search query
  if(query) {
    const q = query.toLowerCase();
    list = list.filter(p=> (p.name+p.desc+p.tags.join(' ')).toLowerCase().includes(q) );
  }
  // sort
  if(sort==='price-asc') list.sort((a,b)=>a.price-b.price);
  else if(sort==='price-desc') list.sort((a,b)=>b.price-a.price);
  else if(sort==='name-asc') list.sort((a,b)=>a.name.localeCompare(b.name));
  // else featured order as is

  state.displayed = list;
  grid.innerHTML = list.map(p=>`
    <article class="product reveal">
      <div class="media">
        <img src="${p.img}" alt="${p.name}" loading="lazy">
        <div class="badge">${p.badge||''}</div>
      </div>
      <h3>${p.name}</h3>
      <div style="color:var(--muted);font-size:13px">${p.desc}</div>
      <div class="meta">
        <div class="price">₹${money(p.price)}</div>
        <div class="actions">
          <button class="btn" onclick="addToCart(${p.id})">Add</button>
          <button class="btn ghost" onclick='quickView(${p.id})'>Quick</button>
        </div>
      </div>
    </article>
  `).join('');

  // apply reveal observer
  document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));
}

/* --------------------- SEARCH / FILTER HANDLERS --------------------- */
$('#searchInput').addEventListener('input', e=>{
  state.filters.query = e.target.value.trim();
  renderProducts();
});
$('#categorySelect').addEventListener('change', e=>{
  state.filters.category = e.target.value;
  renderProducts();
});
$('#sortSelect').addEventListener('change', e=>{
  state.filters.sort = e.target.value;
  renderProducts();
});
$$('.chip').forEach(ch => ch.addEventListener('click', e=>{
  const min = ch.dataset.min ? Number(ch.dataset.min) : null;
  const max = ch.dataset.max ? Number(ch.dataset.max) : null;
  const tag = ch.dataset.tag || null;
  // toggle tag selection
  if(tag){
    state.filters.tag = (state.filters.tag===tag) ? null : tag;
  } else {
    state.filters.min = min;
    state.filters.max = max;
  }
  renderProducts();
}));

/* --------------------- CART --------------------- */
function persistCart(){ localStorage.setItem('av_cart', JSON.stringify(state.cart)); }
function addToCart(id){
  const product = PRODUCTS.find(p=>p.id===id);
  const found = state.cart.find(i=>i.id===id);
  if(found) found.qty++;
  else state.cart.push({...product, qty:1});
  persistCart(); updateCartUI(); showAddToast(product.name);
  updateRecommendations();
}
function removeFromCart(id){
  state.cart = state.cart.filter(i=>i.id!==id);
  persistCart(); updateCartUI(); updateRecommendations();
}
function changeQty(id,delta){
  const item = state.cart.find(i=>i.id===id);
  if(!item) return;
  item.qty = Math.max(1, item.qty + delta);
  persistCart(); updateCartUI(); updateRecommendations();
}
function cartTotal(){
  return state.cart.reduce((s,i)=>s + i.price * i.qty, 0);
}
function updateCartUI(){
  $('#cart-count').textContent = state.cart.reduce((s,i)=>s + i.qty,0);
  const list = $('#cartList'); list.innerHTML = '';
  if(state.cart.length === 0) list.innerHTML = '<div style="padding:18px;color:var(--muted)">Your cart is empty.</div>';
  else {
    state.cart.forEach(item=>{
      const li = document.createElement('div');
      li.className = 'cart-item';
      li.innerHTML = `
        <img src="${item.img}" alt="${item.name}">
        <div style="flex:1">
          <div style="font-weight:700;color:var(--green-1)">${item.name}</div>
          <div style="font-size:13px;color:var(--muted)">₹${money(item.price)} × ${item.qty}</div>
          <div class="qty" style="margin-top:6px">
            <button onclick="changeQty(${item.id}, -1)">−</button>
            <div style="min-width:26px;text-align:center">${item.qty}</div>
            <button onclick="changeQty(${item.id}, 1)">+</button>
            <button style="margin-left:8px;background:transparent;border:none;cursor:pointer;color:#c62828" onclick="removeFromCart(${item.id})">Remove</button>
          </div>
        </div>
      `;
      list.appendChild(li);
    });
  }
  $('#totalAmount').textContent = money(cartTotal());
}

/* --------------------- QUICK VIEW --------------------- */
function quickView(id){
  const p = PRODUCTS.find(x=>x.id===id);
  const modal = document.createElement('div');
  modal.className = 'cart-modal active';
  modal.innerHTML = `
    <div class="cart-content" style="max-width:760px;">
      <button style="position:absolute;right:18px;top:12px;border:none;background:transparent;font-size:20px;cursor:pointer" onclick="document.body.removeChild(this.parentElement.parentElement)">✕</button>
      <div style="display:flex;gap:18px;align-items:flex-start">
        <img src="${p.img}" alt="${p.name}" style="width:220px;height:220px;border-radius:12px;object-fit:cover;box-shadow:0 10px 30px rgba(0,0,0,0.12)">
        <div style="flex:1">
          <h2 style="margin:0;color:var(--green-1)">${p.name}</h2>
          <p style="color:var(--muted);margin-top:8px">${p.desc}</p>
          <p style="font-weight:800;margin-top:12px">₹${money(p.price)}</p>
          <div style="margin-top:18px">
            <button class="btn" onclick="addToCart(${p.id}); document.body.removeChild(this.closest('.cart-modal'))">Add to Cart</button>
            <button class="btn ghost" style="margin-left:8px" onclick="document.body.removeChild(this.closest('.cart-modal'))">Close</button>
          </div>
        </div>
      </div>
    </div>`;
  document.body.appendChild(modal);
}

/* --------------------- CART MODAL HANDLING --------------------- */
$('#open-cart').addEventListener('click', ()=> $('#cartModal').classList.add('active'));
$('#closeCartBtn').addEventListener('click', ()=> $('#cartModal').classList.remove('active'));
$('#checkoutBtn').addEventListener('click', ()=> {
  if(state.cart.length === 0){ alert('Your cart is empty.'); return; }
  alert('Thank you! Checkout demo — cart will be cleared.');
  state.cart = []; persistCart(); updateCartUI(); $('#cartModal').classList.remove('active');
});

/* --------------------- RECOMMENDATIONS --------------------- */
function getRecommendations(){
  // recommend products from tags/categories in cart
  const tags = new Set();
  const cats = new Set();
  state.cart.forEach(i => { i.tags && i.tags.forEach(t=>tags.add(t)); cats.add(i.cat); });
  // score candidates
  const scores = PRODUCTS.map(p=>{
    let sc = 0;
    if(tags.size) p.tags.forEach(t=> sc += tags.has(t) ? 3 : 0);
    sc += cats.has(p.cat) ? 2 : 0;
    sc += (Math.random()*0.6); // small randomness
    if(state.cart.some(i=>i.id===p.id)) sc = -1; // exclude in-cart items
    return {p,sc};
  }).filter(x=>x.sc>0).sort((a,b)=>b.sc-a.sc).slice(0,4).map(x=>x.p);
  return scores;
}
function updateRecommendations(){
  const recEl = document.getElementById('recommendations');
  const recs = getRecommendations();
  if(recs.length===0){ recEl.innerHTML = '<div style="color:var(--muted)">No suggestions yet — add items to cart to get smart recommendations.</div>'; return; }
  recEl.innerHTML = recs.map(p=>`
    <div class="mini">
      <img src="${p.img}" alt="${p.name}">
      <div style="flex:1">
        <div style="font-weight:700;color:var(--green-1)">${p.name}</div>
        <div style="font-size:13px;color:var(--muted)">₹${money(p.price)}</div>
      </div>
      <button class="btn" onclick="addToCart(${p.id})">Add</button>
    </div>`).join('');
}

/* --------------------- TOAST --------------------- */
function showAddToast(name){
  const el = document.createElement('div');
  el.style.position='fixed'; el.style.right='20px'; el.style.bottom='20px';
  el.style.padding='12px 18px'; el.style.background='linear-gradient(90deg,#2e7d32,#165a1d)';
  el.style.color='#fff'; el.style.borderRadius='10px'; el.style.boxShadow='0 8px 24px rgba(0,0,0,0.2)';
  el.style.zIndex=9999; el.style.fontWeight=700;
  el.textContent = `${name} added to cart`;
  document.body.appendChild(el);
  setTimeout(()=>{ el.style.opacity=0; el.style.transform='translateY(10px)'; }, 1500);
  setTimeout(()=>document.body.removeChild(el),2200);
}

/* --------------------- REVEAL OBSERVER --------------------- */
const observer = new IntersectionObserver((entries)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting) entry.target.classList.add('is-visible');
  });
},{threshold:0.12});
document.addEventListener('DOMContentLoaded', ()=>{
  renderProducts();
  updateCartUI();
  updateRecommendations();
  // observe static reveals
  document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));
});

/* --------------------- persist / load --------------------- */
window.addEventListener('beforeunload', ()=> persistCart());

</script>
</body>
</html>
